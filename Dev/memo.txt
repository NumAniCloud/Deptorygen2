
継承をサポートするために最後の対応が必要。
派生クラスのコンストラクタは、基底クラスのコンストラクタ引数を与えなければならない。
これは非常に難しい。コードは複雑になるし実行時間も伸びる。

簡単にするには、基底ファクトリーが生成された後で派生ファクトリーを生成する必要がある。
そうすれば、基底ファクトリーのコンストラクタを見れば与えるべき依存先を見つけることができる。

継承はリニアなので、順番を調べるのは難しくはなさそう。ファクトリーの一覧を手に入れたら、
何も継承していないファクトリーを集めて、ランク０とする。
それを継承しているファクトリーはランク１。
ランク１を継承しているファクトリーはランク２。以後同様。
ある程度以上のランクに達したらエラーとした方がいいかもしれない。

