
# 概念

- ファクトリークラス
- リゾルバーメソッド、マルチリゾルバーメソッド
- 依存関係の解決
- ファクトリーの委譲
- ファクトリーの継承
- 依存関係の解決手段
- キャッシュ
- フック
- IDisposable
- ResolverService
- Resolution属性

# 観点

- ステップバイステップの解説
- 概念ごとの解説
- 哲学の解説

# ファクトリークラス

ファクトリークラスとは、以下の性質を満たすクラス。

- partialクラスである
- Factory属性がついている

ファクトリークラスのことを単にファクトリーとも呼ぶ。

Imfactはファクトリークラスに対して、もう一方のpartial定義を生成する。
その定義内には、リゾルバーメソッドなどファクトリークラスに必要な実装が含まれる。

# リゾルバーメソッド

リゾルバーメソッドとは、以下の性質を満たすクラス。

- partialメソッドである
- ファクトリークラスに属するメソッドである

生成された側のファクトリー定義には、リゾルバーメソッドの実装が生成される。
リゾルバーはこの実装によって、求めるオブジェクトの依存関係を解決する。

戻り値の型と同じ型のインスタンスを生成するのがリゾルバーの役目である。
ただし、Resolution属性がついていれば代わりにそちらで指定された型を生成する。

パラメータを持つこともでき、インスタンスを生成するために必要に応じて引数の値を使用する。

戻り値の型が IEnumerable であるようなリゾルバーを、マルチリゾルバーという。

# 依存関係の解決

クラスはコンストラクタを通じてオブジェクトを要求することがある。
クラスAのコンストラクタでクラスBのオブジェクトが要求されるとき、
AはBに依存しているという。
こういった場合、Aを生成するためにはBのオブジェクトが必須となる。

そして実際にはAが他のオブジェクトC,Dにも依存していたり、
BもまたC,E,Fなどといったオブジェクトに依存していたりして、
依存関係の複雑なネットワークが生じる場合がある。

こういったネットワークを持つオブジェクトを生成するコードを手で書くことは煩雑であるので、
Imfactがそういったコードを生成する。

依存関係の条件を満たしてオブジェクトを生成するコードを構築することを、
依存関係を解決する、と言うことにする。

リゾルバーは、要求された型のコンストラクタや、他のリゾルバーを呼び出すことによって
依存先のオブジェクトを収集し、要求された型のオブジェクトを生成する。
